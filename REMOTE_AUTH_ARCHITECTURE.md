# üîê –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

### **–õ–æ–∫–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥:**
```
masterPassword + salt ‚Üí Argon2 ‚Üí hash ‚Üí —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Üí localJWT
```

### **–£–¥–∞–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):**
```
masterPassword + salt ‚Üí Argon2 ‚Üí hash ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí remoteJWT
```

### **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
```
remoteJWT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
```

## üîë –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–æ–ª–µ–π

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥:**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: masterPassword
2. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç: SHA256(masterPassword) = masterPasswordHash  
3. –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç: randomSalt
4. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç: Argon2(masterPasswordHash + salt) = clientPasswordHash
5. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: {username, salt, clientPasswordHash}
6. –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç: Argon2(clientPasswordHash) = finalLocalHash
7. –í –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î: {username, salt, finalLocalHash}
```

### **–£–¥–∞–ª–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥:**
```
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î: {username, salt, finalLocalHash}
2. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: {username, salt, finalLocalHash}
3. –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: –ù–ï —Ö–µ—à–∏—Ä—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ
4. –í —É–¥–∞–ª–µ–Ω–Ω–æ–π –ë–î: {username, salt, finalLocalHash} (—Ç–æ—Ç –∂–µ —Ö–µ—à!)
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã API

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `POST /auth/register`
```json
{
  "username": "user123",
  "salt": "abc123...def789",
  "passwordHash": "Argon2Hash(SHA256(masterPassword) + salt)"
}
```

### **–£–¥–∞–ª–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `POST /remote/register` 
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: {username, salt, finalLocalHash}
```

### **–£–¥–∞–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥:** `POST /remote/login`
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î  
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: {username, finalLocalHash}
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ú–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø–æ —Å–µ—Ç–∏
- ‚úÖ –ù–∞ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π Argon2 —Ö–µ—à
- ‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å
- ‚úÖ –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—é

### **–ü—Ä–æ—Ü–µ—Å—Å –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
1. **–õ–æ–∫–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å ‚Üí —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ Argon2
2. **–£–¥–∞–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –∏–º–µ—é—â–∏–π—Å—è —Ö–µ—à ‚Üí –ø–æ–ª—É—á–∞–µ—Ç remoteJWT
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç remoteJWT –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **1. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**
- ‚ùå **–ë—ã–ª–æ:** `Argon2(Argon2(SHA256(masterPassword)))`
- ‚úÖ **–°—Ç–∞–ª–æ:** `Argon2(SHA256(masterPassword))` –Ω–∞ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### **2. –¢–∏–ø—ã ID**
- ‚ùå **–ë—ã–ª–æ:** ManagmentServer (String), RemoteDTO (Long)
- ‚úÖ **–°—Ç–∞–ª–æ:** –í–µ–∑–¥–µ String UUID

### **3. JWT —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- ‚ùå **–ë—ã–ª–æ:** –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ JJWT API
- ‚úÖ **–°—Ç–∞–ª–æ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### **4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
- ‚ùå **–ë—ã–ª–æ:** –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã
- ‚úÖ **–°—Ç–∞–ª–æ:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å CompletableFuture

### **5. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- ‚ùå **–ë—ã–ª–æ:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ **–°—Ç–∞–ª–æ:** –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å @Valid –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ 

## ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê**

### **–õ–æ–∫–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥:**
```
masterPassword + salt ‚Üí Argon2 ‚Üí hash ‚Üí —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ ‚Üí localJWT
```

### **–£–¥–∞–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥ (–ø–æ –∂–µ–ª–∞–Ω–∏—é):**
```
masterPassword + salt ‚Üí Argon2 ‚Üí hash ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ ‚Üí remoteJWT
```

### **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
```
remoteJWT –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
```

## üîë –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–æ–ª–µ–π

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥:**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: masterPassword
2. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç: SHA256(masterPassword) = masterPasswordHash  
3. –ö–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç: randomSalt
4. –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç: Argon2(masterPasswordHash + salt) = clientPasswordHash
5. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: {username, salt, clientPasswordHash}
6. –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç: Argon2(clientPasswordHash) = finalLocalHash
7. –í –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î: {username, salt, finalLocalHash}
```

### **–£–¥–∞–ª–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–≤—Ö–æ–¥:**
```
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î: {username, salt, finalLocalHash}
2. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: {username, salt, finalLocalHash}
3. –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: –ù–ï —Ö–µ—à–∏—Ä—É–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ
4. –í —É–¥–∞–ª–µ–Ω–Ω–æ–π –ë–î: {username, salt, finalLocalHash} (—Ç–æ—Ç –∂–µ —Ö–µ—à!)
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å—ã API

### **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `POST /auth/register`
```json
{
  "username": "user123",
  "salt": "abc123...def789",
  "passwordHash": "Argon2Hash(SHA256(masterPassword) + salt)"
}
```

### **–£–¥–∞–ª–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** `POST /remote/register` 
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: {username, salt, finalLocalHash}
```

### **–£–¥–∞–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥:** `POST /remote/login`
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ—Ä–µ—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î  
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: {username, finalLocalHash}
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –ú–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å –ù–ò–ö–û–ì–î–ê –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø–æ —Å–µ—Ç–∏
- ‚úÖ –ù–∞ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π Argon2 —Ö–µ—à
- ‚úÖ –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å
- ‚úÖ –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—é

### **–ü—Ä–æ—Ü–µ—Å—Å –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
1. **–õ–æ–∫–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å ‚Üí —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ Argon2
2. **–£–¥–∞–ª–µ–Ω–Ω—ã–π –≤—Ö–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –∏–º–µ—é—â–∏–π—Å—è —Ö–µ—à ‚Üí –ø–æ–ª—É—á–∞–µ—Ç remoteJWT
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç remoteJWT –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### **1. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**
- ‚ùå **–ë—ã–ª–æ:** `Argon2(Argon2(SHA256(masterPassword)))`
- ‚úÖ **–°—Ç–∞–ª–æ:** `Argon2(SHA256(masterPassword))` –Ω–∞ –æ–±–µ–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### **2. –¢–∏–ø—ã ID**
- ‚ùå **–ë—ã–ª–æ:** ManagmentServer (String), RemoteDTO (Long)
- ‚úÖ **–°—Ç–∞–ª–æ:** –í–µ–∑–¥–µ String UUID

### **3. JWT —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**
- ‚ùå **–ë—ã–ª–æ:** –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ JJWT API
- ‚úÖ **–°—Ç–∞–ª–æ:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### **4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
- ‚ùå **–ë—ã–ª–æ:** –ë–ª–æ–∫–∏—Ä—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã
- ‚úÖ **–°—Ç–∞–ª–æ:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å CompletableFuture

### **5. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- ‚ùå **–ë—ã–ª–æ:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ **–°—Ç–∞–ª–æ:** –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å @Valid –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ 